<div class="accordion mb-3" id="accordion-discovery-explanation">
    <div class="accordion-item">
        <h2 class="accordion-header" id="headingOne">
            <button class="accordion-button collapsed explanation-header" type="button" data-bs-toggle="collapse"
                    data-bs-target="#collapseOne" aria-expanded="false" aria-controls="collapseOne" data-bs-parent="#accordion-discovery-explanation">
                Show / hide materials discovery explanation
            </button>
        </h2>
        <div id="collapseOne" class="accordion-collapse collapse" aria-labelledby="headingOne">
            <div class="accordion-body explanation-body" role="tooltip">
                In this form you can run machine learning experiments to discover interesting material
                combinations.
                This is measured by their utility, which is computed using
                predicted target properties, as well as prior knowledge about properties derived from the
                input.

                First, select the properties you want to work with:
                <ol>
                    <li>Select a data set to work on from the table above using the blue checkmark buttons.</li>
                    <li>Select Materials Data columns (features) that you want to use in your experiment in the left
                        selection box.
                    </li>
                    <li>Select the target properties you want to predict in the center selection box.</li>
                    <li>Select derived properties that you want to use to maximize utility.</li>
                </ol>
                You can use Ctrl+Click or Shift+Click to select multiple properties in each selection box.

                <br>
                <br>

                Next, select how you want to use these derived and target properties:
                <ul>
                    <li>For each property choose if you want to maximize or minimize it.</li>
                    <li>You may adjust the weight of each property in the utility calculation.</li>
                    <li>You may specify a threshold for each property.
                        <ul>
                            <li>For derived properties, rows outside of the threshold will be dropped.</li>
                            <li>For target properties, values will be clamped to the threshold during the
                                utility
                                calculation. The values shown in the results table below will remain unchanged.
                            </li>
                        </ul>
                    </li>
                </ul>

                Finally, you may choose a machine learning model, as well as a curiosity value.
                Use high curiosity values for exploration and low curiosity values for exploitation
                (refinement).
                If you are not sure leave it unchanged. Refer to the manual for more information.
            </div>
        </div>
    </div>
</div>

<form action="" method="post" novalidate>
    <div class="row g-3 mb-3 align-items-end">
        <div class="col-12 col-md-4">
            {{ discovery_form.materials_data_input.label(class_="control-label") }}
            {{ discovery_form.materials_data_input(class_="form-control form-select multiple-select-lg") }}
        </div>
        <div class="col-12 col-md-4">
            {{ discovery_form.target_properties.label(class_="control-label") }}
            {{ discovery_form.target_properties(class_="form-control form-select multiple-select-lg") }}
        </div>
        <div class="col-12 col-md-4">
            {{ discovery_form.a_priori_information.label(class_="control-label") }}
            {{ discovery_form.a_priori_information(class_="form-control form-select multiple-select-lg") }}
        </div>
    </div>
    <div id="target-configuration-form-placeholder"></div>
    <div id="a-priori-information-configuration-form-placeholder"></div>
    <div class="row g-3 mb-3">
        <div class="col-12 col-md-6">
            {{ discovery_form.model.label(class_="control-label") }}
            {{ discovery_form.model(class_="form-control form-select") }}
        </div>
        <div class="col-12 col-md-6">
            {{ discovery_form.curiosity.label(class_="control-label") }}
            {{ discovery_form.curiosity(class_="form-range", min=0, max=10, oninput="updateCuriosityValue(value)") }}
            <output for="curiosity" id="selected-range">{{ discovery_form.curiosity.data }}</output>
        </div>
    </div>
    <button id="run-experiment-button" class="btn btn-success col-12 mb-3" type="button" data-bs-toggle="tooltip"
            data_bs_placement="bottom" title="Select at least a target and whether it should be maximized or minimized"
            disabled>
        Run experiment with given configuration
    </button>
</form>
